/*
 * ============================================================================
 * This file was generated by the GMV's Configurator Tool and is part of an I/O
 * partition configuration. 
 * File Purpose:	IO Partition user configuration. Contains the configuration 
 * 					options for Ethernet's GRSPW devices.
 * ============================================================================
 */
#include <iop.h>
#include <IOPgrspw_router.h>
#include <spw_support.h>
#include <routing_table.h>

struct router_routes rtr_routes =
{
	.route =
	{
		/* 020..027 */ 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4,  // 0x4 is 0100 which enables port
		/* 020..02f */ 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4,
		/* 030..037 */ 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4,
		/* 030..03f */ 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4,
   
		/* 040..047 */ 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4,
		/* 040..04f */ 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4,
		/* 050..057 */ 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4,
		/* 050..05f */ 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4,

		/* 060..067 */ 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4,
		/* 060..06f */ 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4,
		/* 070..077 */ 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4,
		/* 070..07f */ 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4,

		/* 080..087 */ 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4,
		/* 080..08f */ 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4,  
		/* 090..097 */ 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5,  // 0x5 is 0101 which enables port and header deletion
		/* 090..09f */ 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5,

		/* 0a0..0a7 */ 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5,
		/* 0a0..0af */ 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5,
		/* 0b0..0b7 */ 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5,
		/* 0b0..0bf */ 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5,

		/* 0c0..0c7 */ 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5,
		/* 0c0..0cf */ 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5,
		/* 0d0..0d7 */ 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5,
		/* 0d0..0df */ 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5,

		/* 0e0..0e7 */ 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5,
		/* 0e8..0ef */ 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5,
		/* 0f0..0f7 */ 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5,
		/* 0f8..0ff */ 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5,
	}
};
/** @brief  GRSPW control structure*/
static router_priv_t spwrtr_driver = \
{
	/* Router tables */
	.routes = rtr_routes,
	.ps = rtr_ps,
	.timer_reload = ps_timer
};

/** @brief GRSPW driver configuration */
static iop_spw_router_device_t device_configuration = \
{
    /* device configuration */
    .dev        = {

        .driver         = (void *)&spwrtr_driver,
        .init           = router_initialize,
        .open           = router_open,
        .read           = NULL,
        .write          = NULL,
        .close          = router_close,
    },

    /* spacewire router configuration configuration */
	.flags		= 11111,
	.config		= 10000,
	.iid		= 1,
	.idiv		= 1
};

/**
 * @brief Device Scheduling
 */
static uint32_t reads_per_period[] = \
    { 5 };

/**
 * @brief Pysical Device configuration
 */
iop_physical_device_t physical_device_0 =\
{
    .driver             = (iop_device_driver_t *)&device_configuration,
    .reads_per_period   = reads_per_period,

    .reader_task        = NULL,
    .writer_task        = NULL,
    .header_prebuild    = NULL,
    .header_compare     = NULL,
    .header_copy        = NULL,
};
