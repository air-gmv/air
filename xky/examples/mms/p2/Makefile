#
# Makefile : bare : Partition (Id: 2, Name: p2)
# Generated by XKY Configurator Tool v3.5
#

EXEC=p2.exe
TARGET_BUILD=build

# XKY Makefile Include file
include $(XKY_ROOT)/Makefile.inc

CSRCS=$(shell find ./ ../common -type f -name '*.c')
CHDRS=$(shell find ./ ../common -type f -name '*.h')
ASSRCS=$(shell find ./ ../common -type f -name '*.S')

SOURCE_FILES=$(CSRCS) $(ASSRCS)
OBJECT_FILES=\
$(patsubst %.c,$(TARGET_BUILD)/%.o,\
$(patsubst %.S,$(TARGET_BUILD)/%.o,$(SOURCE_FILES)))

# built in libraries include files
TARGET_CPPFLAGS+=\
-I./\
-B./\
-I../common/\
-B../common/\
-B$(XKY_POS)/bare/\
-B$(XKY_LIBS)/libprintf/\
-B$(XKY_LIBS)/libxky/

# All
.PHONY : all
all: $(EXEC) $(OBJECT_FILES) $(CHDRS)

# Executale
$(EXEC): $(OBJECT_FILES) $(CHDRS)
	$(TARGET_LD)\
		-nostdlib -nodefaultlibs -nostartfiles\
		-T$(XKY_POS)/bare/include/linkcmds.ld\
		-Wl,--start-group\
		-Wl,--build-id=none\
		-L$(XKY_PMK)/\
		$(XKY_POS)/bare/bare.a\
		-lgcc -lc -lm\
		$(XKY_LIBS)/libprintf/libprintf.a\
		$(XKY_LIBS)/libxky/libxky.a\
		$(OBJECT_FILES)\
		-Wl,--end-group\
		-o $(EXEC)

# Clean
.PHONY : clean
clean:
	@($(RM) $(TARGET_BUILD))
	@($(RM) $(EXEC))



