#
# Makefile : RTEMS-IMPR_PARTITION : Partition (Id: 2, Name: p1)
# Generated by XKY Configurator Tool v3.5
#
EXEC=p1.exe
PGM=$(EXEC)
 
# Optional managers required by the application, select between:
#     Event Manager = event
#     Message Queue Manager = msg
#     Rate Monotonic Manager = rtmon
#     Semaphore Manager = sem
#     Timer manager = timer
#     Extension Manager = ext
#     IO Manager = io
MANAGERS=sem rtmon msg timer

# C source code and headers filenames used in the example
CSRCS=$(shell find ./ -type f -name '*.c')
CHDRS=$(shell find ./ -type f -name '*.h')
COBJS_=$(CSRCS:.c=.o)
COBJS=$(COBJS_:%=$(ARCH)/%) $(shell find ../common -type f -name '*.o')
 
# RTEMS Improvement RTEMS source code 
RTEMS_USES_NEWLIB = no
 
# Example of assembly source code filenames that could be included 
ASSRCS=$(shell find ./ -type f -name '*.S')
ASOBJS_=$(ASSRCS:.S=.o)
ASOBJS=$(ASOBJS_:%=$(ARCH)/%)

# libraries
LD_LIBS =\
$(XKY_LIBS)/libprintf/libprintf.a\
$(XKY_LIBS)/imaspex/imaspex.a\
$(XKY_LIBS)/libxky/libxky.a\

# The RTEMS_MAKEFILE_PATH is defined by the user for the specific CPU and BSP
RTEMS_MAKEFILE_PATH=$(XKY_POS)/rtems-impr/rtems-impr-install/sparc-rtems4.8/leon3
RTEMS_EXTERNAL_LIBRARY_PATH=\
$(XKY_POS)/rtems-impr/edilib/library\

# These includes should not be modified by the user.  
include $(RTEMS_MAKEFILE_PATH)/Makefile.inc 
include $(RTEMS_CUSTOM) 
include $(PROJECT_ROOT)/make/leaf.cfg

# built in libraries include files
CPPFLAGS+=\
-gdwarf-2\
-I./\
-B./\
-I../common/\
-B../common/\
-B$(XKY_LIBS)/libprintf/\
-B$(XKY_LIBS)/imaspex/\
-B$(XKY_LIBS)/libxky/

OBJS = $(COBJS) $(ASOBJS)
 
all:    $(ARCH) $(PGM)  
    
$(PGM): $(OBJS) $(CHDRS)
	$(make-exe)
