<!-- Test description file -->
<!-- Test steps must be sequential, starting at 001 -->
<!-- Repetitions are limited to 0xFFF,i.e. 4095		-->
<!-- Major time frame [seconds]						-->
<!-- Test End partition : partition where the test
	 will end and finish - if needed, this can be 
	 adapted										-->
<TDF>
	<!-- Test Definition -->
	<test 	name="TEST-DEF-00012"
			id="12" 
			partitions="2"
			test_end_partition="0"
			repeat="1" 
			mtf="1.5"
			ms_per_tick="2"
			type="TEST_GMV_VAL"
			personality="RTEMS5">
		<description>
			Repeat test TEST-DEF-00009 with more than one execution window for
			partition 0.
		</description>
		<requirements>
			<req name="AIR_SEP_0120" />	
		</requirements>
		
		<!-- Test Procedure -->
		<testprocedure repeat="1">
      <teststep id="0" partition="0" repeat="1">
        <description>
          Get the current time, sleep for one tick, get the time again and 
          measure the difference. 
          Must be equal to 1 for at least 19, i.e. the size of the first execution
          window of partition p0.
        </description>
      </teststep>
      <teststep id="1" partition="1" repeat="1">
        <description>
          Call pal_schedule_change for scheedule 1, and check that a 
          PMK_VIOL_ERR fault occured, that was captured by the partition callback.
        </description>
      </teststep>
      <teststep id="2" partition="0" repeat="1">
        <description>
          Check that the last step differs (new_ex_window_tick - 
          prev_ex_window_tick) = 11 ticks from the previously stored value.
        </description>
      </teststep>
      <teststep id="3" partition="0" repeat="1">
        <description>
          Get the current time, sleep for one tick, get the time again and 
          measure the difference. Must be equal to 1 for at least 9, i.e. 
          the size of the second execution window of partition p0.
        </description>
      </teststep>
      <teststep id="4" partition="0" repeat="1">
        <description>
          Call pal_schedule_change for schedule 1.
        </description>
      </teststep>
      <teststep id="5" partition="0" repeat="1">
        <description>
          Get the current time, sleep for one tick, get the time again and 
          measure the difference. Must be equal to 1 for at least 19 times 
          (the same value as before), since the schedule change only takes 
          effect in the next MTF
        </description>
      </teststep>
      <teststep id="6" partition="0" repeat="1">
        <description>
          Check that the last step differs (new_ex_window_tick - 
          prev_ex_window_tick) = 11 ticks from the previously stored value.
        </description>
      </teststep>
      <teststep id="7" partition="0" repeat="1">
        <description>
          Get the current time, sleep for one tick, get the time again and 
          measure the difference. Must be equal to 1 for at least 9, i.e. the 
          size of the second execution window of partition p0.
        </description>
      </teststep>
      <teststep id="8" partition="0" repeat="1">
        <description>
          Get the current time, and check that it differs MTF from previously 
          stored value.
        </description>
      </teststep>
		</testprocedure>		
	</test>	<!-- Test id="050" -->
</TDF>
