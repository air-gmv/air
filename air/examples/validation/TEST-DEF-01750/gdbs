set confirm off
set logging overwrite on
set logging file log.txt
set logging on
tar extended-remote localhost:1234

define print_curr_part
	printf "%i", *((int)&air_memmap_PMK_SharedAreaStart)
end

load executable/o-optimize/AIRPMK.exe
file executable/o-optimize/AIRPMK.exe

#br pmk_ISR_Clock_Handler
#commands
#silent
#print_curr_part
#printf ":> pmk_ISR_Clock_Handler (%010i)     psr=<0x%08x> PS->S (%i->%i)\n",p_pmk_shared_area->clock_ticks,$psr, ($psr & 0x40) >> 6, ($psr & 0x80) >> 7
#cont
#end

#bre pmk_ISR_Clock_Handler if p_pmk_shared_area->clock_ticks==179

#bre pmk_partition_scheduler if p_pmk_shared_area->clock_ticks==180

br test_step_announce

