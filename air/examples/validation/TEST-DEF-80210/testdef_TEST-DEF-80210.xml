<!-- Test description file -->
<!-- Test steps must be sequential, starting at 001 -->
<!-- Repetitions are limited to 0xFFF,i.e. 4095		-->
<!-- Major time frame [seconds]						-->
<!-- Test End partition : partition where the test
	 will end and finish - if needed, this can be 
	 adapted										-->
<TDF>
	<!-- Test Definition -->
	<test 	name="TEST-DEF-80210"
			id="80210" 
			partitions="2"
			test_end_partition="0"
			repeat="1" 
			mtf="0.15"
			ms_per_tick="5"
			type="TEST_GMV_VAL"
			personality="RTEMSIMPR"
			apex="IMASPEX">
		<description>
						Define a system with two partitions with the following data: P1:
			ExWindow=25ms, Period=150ms, LocalTime P2: ExWindow=25ms, Period=150ms, GlobalTime
			TicksPerSecond=5ms Define a program that runs in both partitions with the following
			pseudo-code running in cycle: GET_TIME rtems_task_wake_after(1) Check that the
			values returned by GET_TIME are aproximatelly constant for the first
			partition after running the cycle for 20 times, and that for the second
			partition the value reported is 25 times the regular value each 5 cycles.
		</description>
		<requirements>
			<req name="AIR_SEP_0210" />	
		</requirements>
		
		<!-- Test Procedure -->
		<testprocedure repeat="20">
			<teststep id="0" partition="0" repeat="1">
				<description>
					Obtain on-board time using GET_TIME. Verify return code.
				</description>
			</teststep>
			<teststep id="1" partition="0" repeat="1">
				<description>
					Sleep for 1 tick.
				</description>
			</teststep>
			<teststep id="2" partition="0" repeat="1">
				<description>
					Obtain on-board time using GET_TIME. Verify that the time difference with the previously obtained time is approximately equal to the miliseconds per tick value. 
				</description>
			</teststep>
			<teststep id="3" partition="1" repeat="1">
				<description>
					Obtain on-board time using GET_TIME. Verify return code. 
				</description>
			</teststep>
			<teststep id="4" partition="1" repeat="1">
				<description>
					Sleep for 1 tick.
				</description>
			</teststep>
			<teststep id="5" partition="1" repeat="1">
				<description>
					Obtain on-board time using GET_TIME. Verify that the time difference with the previously obtained time is approximately equal to the miliseconds per tick value except every 5 cycles in which this value should be approximately equal to the partition's period.
				</description>
			</teststep>	
			
		</testprocedure>		
	</test>	<!-- Test id="80210" -->
</TDF>